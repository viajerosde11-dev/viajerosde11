---
import { hero } from '../data/site';
---

<section id="inicio" class="relative">
  <div class="relative">
    <div class="relative mx-auto max-w-5xl px-6">
      <div class="relative overflow-hidden rounded-2xl shadow-xl">
        <video
          class="video-clean aspect-[16/9] w-full object-cover"
          autoplay
          muted
          loop
          playsinline
          preload="metadata"
          controlslist="nodownload nofullscreen"
          disablepictureinpicture
        >
          <source src="/videos/Beach-v2.mp4" type="video/mp4" />
          Tu navegador no soporta el video.
        </video>
        <div class="pointer-events-none absolute inset-0 flex items-center justify-center p-6">
          <div class="max-w-[320px] rounded-lg bg-white/8 px-6 py-5 text-center text-slate-900 shadow-2xl backdrop-blur-md md:max-w-[520px] md:px-8 md:py-6">
            <p class="font-display text-2xl font-semibold leading-tight text-black md:text-3xl">
              Hacemos realidad
            </p>
            <p class="font-display mt-1 whitespace-nowrap text-2xl font-semibold leading-tight text-black md:text-3xl">
              tu excursi√≥n de grado 11
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="mx-auto max-w-6xl px-6 py-10 text-center">
      <div class="mt-4 flex flex-wrap justify-center gap-4">
        <a
          href={hero.ctas.primary.href}
          target="_blank"
          rel="noreferrer"
          class="inline-flex items-center justify-center rounded-full bg-ocean px-6 py-3 text-sm font-semibold text-white shadow-lg transition hover:-translate-y-0.5 hover:bg-ocean-dark"
        >
          {hero.ctas.primary.label}
        </a>
        <a
          href={hero.ctas.secondary.href}
          class="inline-flex items-center justify-center rounded-full border border-ocean-dark px-6 py-3 text-sm font-semibold text-ocean-dark transition hover:-translate-y-0.5 hover:bg-white/70"
        >
          {hero.ctas.secondary.label}
        </a>
      </div>

      <div class="mt-10 w-full max-w-[300px] text-left">
        <div class="loading-panel">
          <div class="flex items-center justify-between text-sm uppercase tracking-[0.2em] text-slate-600">
            <span id="loading-text">Alistando tiquetes...</span>
            <span id="loading-percent" class="font-semibold text-ocean">20%</span>
          </div>
          <div class="loading-track">
            <div id="loading-bar" class="loading-bar">
              <span class="loading-shimmer"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .loading-panel {
    border-radius: 0.9rem;
    border: none;
    background: transparent;
    padding: 0;
    box-shadow: none;
  }

  .loading-track {
    position: relative;
    margin-top: 0.45rem;
    height: 5px;
    width: 100%;
    border-radius: 999px;
    background: rgba(15, 23, 42, 0.12);
    overflow: hidden;
  }

  .loading-bar {
    height: 100%;
    width: 0%;
    border-radius: 999px;
    background: linear-gradient(90deg, #0b6ea8, #5cc6b0, #ffb020);
    transition: width 1.4s ease;
    position: relative;
    overflow: hidden;
  }

  .loading-shimmer {
    position: absolute;
    top: 0;
    left: -40%;
    height: 100%;
    width: 40%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.7), transparent);
    animation: shimmer 1.6s linear infinite;
  }

  @keyframes shimmer {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(220%);
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const steps = [
      { text: 'Alistando tiquetes...', percent: 20 },
      { text: 'Tomando el vuelo...', percent: 50 },
      { text: 'Llegando al destino...', percent: 80 },
      { text: 'Disfrutando la experiencia', percent: 100 },
    ];

    const textEl = document.getElementById('loading-text');
    const percentEl = document.getElementById('loading-percent');
    const barEl = document.getElementById('loading-bar');

    if (!textEl || !percentEl || !barEl) return;

    let index = 0;

    const updateLoading = () => {
      const step = steps[index];
      textEl.textContent = step.text;
      percentEl.textContent = `${step.percent}%`;
      barEl.style.width = `${step.percent}%`;
      index = (index + 1) % steps.length;
    };

    updateLoading();
    setInterval(updateLoading, 2000);
  });
</script>

